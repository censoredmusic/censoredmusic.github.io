<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ü§¨Censored Music</title>
  <link rel="icon" type="image/png" href="covers/icon.png">

  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #000;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      transition: background 0.5s;
    }

    .player {
      width: 350px;
      background: #181818;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      transition: all 0.5s;
    }

    .title {
      text-align: center;
      font-size: 1.4rem;
      margin-bottom: 15px;
    }

    .cover {
      width: 100%;
      height: 300px;
      background-size: cover;
      background-position: center;
      border-radius: 12px;
      margin-bottom: 15px;
    }

    .song-name {
      text-align: center;
      font-size: 1.1rem;
      margin-bottom: 10px;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 15px 0;
    }

    button {
      background: #1db954;
      border: none;
      color: black;
      padding: 10px 15px;
      border-radius: 50px;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      opacity: 0.85;
    }

    .lyrics {
      height: 150px;
      overflow-y: auto;
      background: #101010;
      padding: 10px;
      border-radius: 10px;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .lyrics span {
      color: #888;
      display: block;
    }

    .lyrics span.active {
      color: var(--accent-color);
      font-weight: bold;
    }

    .nav-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: var(--bg-image);
      background-size: cover;
      background-position: center;
      filter: blur(40px) brightness(0.5);
      z-index: -1;
      transition: 0.5s;
    }
  </style>
</head>
<body>

  <div class="player" id="player">
    <div class="title" id="pageTitle">Harris Academy Morden</div>

    <div id="cover" class="cover"></div>

    <div id="songName" class="song-name"></div>

    <div class="controls" id="songControls">
      <button onclick="prevSong()">‚èÆ Back</button>
      <button onclick="togglePlay()">‚ñ∂ / ‚è∏</button>
      <button onclick="nextSong()">Next ‚è≠</button>
    </div>

    <div id="lyrics" class="lyrics"></div>

    <div class="nav-buttons">
      <button onclick="switchPage('home')">üèùÔ∏è Home</button>
      <button onclick="switchPage('album')">üíø Album</button>
      <button onclick="switchPage('queue')">üéµ Queue</button>
    </div>

    <audio id="audio"></audio>
  </div>

<script>
const songs = [
  {
    name: "Daylight (Drake)",
    src: "music/daylight_drake.mp3",
    cover: "covers/daylight.jpg",
    lyrics: [
      { time: 0, text: "Treat all my exes like Jehovah's Witnesses" },
      { time: 4, text: "Free all the dogs and fuck all the witnesses" },
      { time: 8, text: "They sittin' down, we standin' on business" },
      { time: 12, text: "Ayy, standin' on business" }
    ]
  },
  {
    name: "Parade on Cleveland (Young Thug ft. Drake)",
    src: "music/parade_on_cleveland.mp3",
    cover: "covers/parade.jpg",
    lyrics: [
      { time: 0, text: "Whoa" },
      { time: 3, text: "How the fuck you out here goin' tit-for-tat?" },
      { time: 6, text: "I shoulda saw the signs, how could I miss that?" }
    ]
  }
];

let currentSong = 0;
let currentPage = 'home';
const audio = document.getElementById("audio");
const cover = document.getElementById("cover");
const songName = document.getElementById("songName");
const lyricsDiv = document.getElementById("lyrics");
const pageTitle = document.getElementById("pageTitle");
const songControls = document.getElementById("songControls");

function loadSong(index) {
  const song = songs[index];
  audio.src = song.src;
  cover.style.backgroundImage = `url('${song.cover}')`;
  songName.textContent = song.name;

  document.body.style.setProperty("--bg-image", `url('${song.cover}')`);
  extractAccentColor(song.cover);

  lyricsDiv.innerHTML = "";
  song.lyrics.forEach(line => {
    const span = document.createElement("span");
    span.textContent = line.text;
    span.dataset.time = line.time;
    lyricsDiv.appendChild(span);
  });
}

function togglePlay() {
  if (audio.paused) audio.play();
  else audio.pause();
}

function nextSong() {
  currentSong = (currentSong + 1) % songs.length;
  loadSong(currentSong);
  audio.play();
}

function prevSong() {
  currentSong = (currentSong - 1 + songs.length) % songs.length;
  loadSong(currentSong);
  audio.play();
}

audio.addEventListener("timeupdate", () => {
  const currentTime = audio.currentTime;
  const lines = lyricsDiv.querySelectorAll("span");
  lines.forEach(line => {
    const time = Number(line.dataset.time);
    if (currentTime >= time) {
      lines.forEach(l => l.classList.remove("active"));
      line.classList.add("active");
    }
  });
});

function extractAccentColor(imageSrc) {
  const img = new Image();
  img.crossOrigin = "anonymous";
  img.src = imageSrc;
  img.onload = () => {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = img.width; canvas.height = img.height;
    ctx.drawImage(img, 0, 0);
    const data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
    let r = 0, g = 0, b = 0, count = 0;
    for (let i = 0; i < data.length; i += 40) {
      r += data[i]; g += data[i+1]; b += data[i+2]; count++;
    }
    r = Math.floor(r/count); g = Math.floor(g/count); b = Math.floor(b/count);
    document.documentElement.style.setProperty("--accent-color", `rgb(${r},${g},${b})`);
  };
}

function switchPage(page) {
  currentPage = page;
  if (page === 'home') {
    pageTitle.textContent = "üèùÔ∏è Floating Island";
    cover.style.display = "block";
    songName.style.display = "block";
    songControls.style.display = "flex";
    lyricsDiv.style.display = "block";
  } else if (page === 'album') {
    pageTitle.textContent = "üíø Album Page";
    cover.style.display = "block";
    songName.style.display = "block";
    songControls.style.display = "none";
    lyricsDiv.style.display = "none";
  } else if (page === 'queue') {
    pageTitle.textContent = "üéµ Queue Page";
    cover.style.display = "none";
    songName.style.display = "none";
    songControls.style.display = "none";
    lyricsDiv.innerHTML = songs.map(s => `<span>${s.name}</span>`).join("");
    lyricsDiv.style.display = "block";
  }
}

// Load first song on startup
loadSong(currentSong);
switchPage('home');
</script>
</body>
</html>
